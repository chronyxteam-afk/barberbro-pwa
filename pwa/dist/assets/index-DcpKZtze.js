import{r as b,a as ne,R as K}from"./react-vendor-CIP6LD3P.js";import{c as ie}from"./store-CtB4bYHU.js";import{b as U,i as J,a as M,c as $,d as le,p as G,f as Z}from"./utils-kVcadHLY.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();var ee={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=b,de=Symbol.for("react.element"),me=Symbol.for("react.fragment"),ue=Object.prototype.hasOwnProperty,pe=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,he={key:!0,ref:!0,__self:!0,__source:!0};function te(r,a,t){var o,s={},n=null,l=null;t!==void 0&&(n=""+t),a.key!==void 0&&(n=""+a.key),a.ref!==void 0&&(l=a.ref);for(o in a)ue.call(a,o)&&!he.hasOwnProperty(o)&&(s[o]=a[o]);if(r&&r.defaultProps)for(o in a=r.defaultProps,a)s[o]===void 0&&(s[o]=a[o]);return{$$typeof:de,type:r,key:n,ref:l,props:s,_owner:pe.current}}O.Fragment=me;O.jsx=te;O.jsxs=te;ee.exports=O;var e=ee.exports,re,V=ne;re=V.createRoot,V.hydrateRoot;function xe(r={}){const{nonce:a,onScriptLoadSuccess:t,onScriptLoadError:o}=r,[s,n]=b.useState(!1),l=b.useRef(t);l.current=t;const m=b.useRef(o);return m.current=o,b.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=a,c.onload=()=>{var i;n(!0),(i=l.current)===null||i===void 0||i.call(l)},c.onerror=()=>{var i;n(!1),(i=m.current)===null||i===void 0||i.call(m)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[a]),s}const oe=b.createContext(null);function fe({clientId:r,nonce:a,onScriptLoadSuccess:t,onScriptLoadError:o,children:s}){const n=xe({nonce:a,onScriptLoadSuccess:t,onScriptLoadError:o}),l=b.useMemo(()=>({clientId:r,scriptLoadedSuccessfully:n}),[r,n]);return K.createElement(oe.Provider,{value:l},s)}function ge(){const r=b.useContext(oe);if(!r)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return r}function ve(r){var a;return(a=r==null?void 0:r.clientId)!==null&&a!==void 0?a:r==null?void 0:r.client_id}const be={large:40,medium:32,small:20};function ye({onSuccess:r,onError:a,useOneTap:t,promptMomentNotification:o,type:s="standard",theme:n="outline",size:l="large",text:m,shape:c,logo_alignment:i,width:u,locale:p,click_listener:x,containerProps:f,...y}){const d=b.useRef(null),{clientId:h,scriptLoadedSuccessfully:v}=ge(),g=b.useRef(r);g.current=r;const j=b.useRef(a);j.current=a;const w=b.useRef(o);return w.current=o,b.useEffect(()=>{var N,S,z,E,L,R,F,W,H;if(v)return(z=(S=(N=window==null?void 0:window.google)===null||N===void 0?void 0:N.accounts)===null||S===void 0?void 0:S.id)===null||z===void 0||z.initialize({client_id:h,callback:k=>{var D;if(!(k!=null&&k.credential))return(D=j.current)===null||D===void 0?void 0:D.call(j);const{credential:C,select_by:se}=k;g.current({credential:C,clientId:ve(k),select_by:se})},...y}),(R=(L=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||L===void 0?void 0:L.id)===null||R===void 0||R.renderButton(d.current,{type:s,theme:n,size:l,text:m,shape:c,logo_alignment:i,width:u,locale:p,click_listener:x}),t&&((H=(W=(F=window==null?void 0:window.google)===null||F===void 0?void 0:F.accounts)===null||W===void 0?void 0:W.id)===null||H===void 0||H.prompt(w.current)),()=>{var k,D,C;t&&((C=(D=(k=window==null?void 0:window.google)===null||k===void 0?void 0:k.accounts)===null||D===void 0?void 0:D.id)===null||C===void 0||C.cancel())}},[h,v,t,s,n,l,m,c,i,u,p]),K.createElement("div",{...f,ref:d,style:{height:be[l],...f==null?void 0:f.style}})}const je={};function we(r,a){let t;try{t=r()}catch{return}return{getItem:s=>{var n;const l=c=>c===null?null:JSON.parse(c,void 0),m=(n=t.getItem(s))!=null?n:null;return m instanceof Promise?m.then(l):l(m)},setItem:(s,n)=>t.setItem(s,JSON.stringify(n,void 0)),removeItem:s=>t.removeItem(s)}}const T=r=>a=>{try{const t=r(a);return t instanceof Promise?t:{then(o){return T(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return T(o)(t)}}}},Ne=(r,a)=>(t,o,s)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:h=>h,version:0,merge:(h,v)=>({...v,...h}),...a},l=!1;const m=new Set,c=new Set;let i;try{i=n.getStorage()}catch{}if(!i)return r((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),t(...h)},o,s);const u=T(n.serialize),p=()=>{const h=n.partialize({...o()});let v;const g=u({state:h,version:n.version}).then(j=>i.setItem(n.name,j)).catch(j=>{v=j});if(v)throw v;return g},x=s.setState;s.setState=(h,v)=>{x(h,v),p()};const f=r((...h)=>{t(...h),p()},o,s);let y;const d=()=>{var h;if(!i)return;l=!1,m.forEach(g=>g(o()));const v=((h=n.onRehydrateStorage)==null?void 0:h.call(n,o()))||void 0;return T(i.getItem.bind(i))(n.name).then(g=>{if(g)return n.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==n.version){if(n.migrate)return n.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var j;return y=n.merge(g,(j=o())!=null?j:f),t(y,!0),p()}).then(()=>{v==null||v(y,void 0),l=!0,c.forEach(g=>g(y))}).catch(g=>{v==null||v(void 0,g)})};return s.persist={setOptions:h=>{n={...n,...h},h.getStorage&&(i=h.getStorage())},clearStorage:()=>{i==null||i.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>d(),hasHydrated:()=>l,onHydrate:h=>(m.add(h),()=>{m.delete(h)}),onFinishHydration:h=>(c.add(h),()=>{c.delete(h)})},d(),y||f},_e=(r,a)=>(t,o,s)=>{let n={storage:we(()=>localStorage),partialize:d=>d,version:0,merge:(d,h)=>({...h,...d}),...a},l=!1;const m=new Set,c=new Set;let i=n.storage;if(!i)return r((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),t(...d)},o,s);const u=()=>{const d=n.partialize({...o()});return i.setItem(n.name,{state:d,version:n.version})},p=s.setState;s.setState=(d,h)=>{p(d,h),u()};const x=r((...d)=>{t(...d),u()},o,s);s.getInitialState=()=>x;let f;const y=()=>{var d,h;if(!i)return;l=!1,m.forEach(g=>{var j;return g((j=o())!=null?j:x)});const v=((h=n.onRehydrateStorage)==null?void 0:h.call(n,(d=o())!=null?d:x))||void 0;return T(i.getItem.bind(i))(n.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==n.version){if(n.migrate)return[!0,n.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var j;const[w,N]=g;if(f=n.merge(N,(j=o())!=null?j:x),t(f,!0),w)return u()}).then(()=>{v==null||v(f,void 0),f=o(),l=!0,c.forEach(g=>g(f))}).catch(g=>{v==null||v(void 0,g)})};return s.persist={setOptions:d=>{n={...n,...d},d.storage&&(i=d.storage)},clearStorage:()=>{i==null||i.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>y(),hasHydrated:()=>l,onHydrate:d=>(m.add(d),()=>{m.delete(d)}),onFinishHydration:d=>(c.add(d),()=>{c.delete(d)})},n.skipHydration||y(),f||x},Se=(r,a)=>"getStorage"in a||"serialize"in a||"deserialize"in a?((je?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ne(r,a)):_e(r,a),ke=Se,Ie="https://script.google.com/macros/s/AKfycbwFBG1nbA0pyiWfFpl5MqybR3bEYYwFJHY6GT3l6hfboU5kXnzdamJETXintswcLxI2Gw/exec";class Ee{constructor(a){this.baseUrl=a}async fetchAPI(a,t={}){var o,s;try{let n=null;try{const p=localStorage.getItem("barberbro-storage");p&&(n=(s=(o=JSON.parse(p).state)==null?void 0:o.auth)==null?void 0:s.token)}catch(p){console.warn("âš ï¸ Errore lettura token da persist:",p)}const l=n?`&authorization=${encodeURIComponent(n)}`:"";let m="";if(t.params)for(const[p,x]of Object.entries(t.params))x!=null&&(m+=`&${encodeURIComponent(p)}=${encodeURIComponent(x)}`);const c=`${this.baseUrl}?endpoint=${a}${l}${m}`,i=await fetch(c,{...t});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const u=await i.json();return u.statusCode===401&&(console.warn("ðŸ”’ Token scaduto, ricarica necessaria"),localStorage.removeItem("barberbro-storage"),window.location.reload()),u}catch(n){return console.error(`API Error [${a}]:`,n),{success:!1,error:n.message}}}async postAPI(a){var t,o;try{let s=null;try{const i=localStorage.getItem("barberbro-storage");i&&(s=(o=(t=JSON.parse(i).state)==null?void 0:t.auth)==null?void 0:o.token)}catch(i){console.warn("âš ï¸ Errore lettura token da persist:",i)}const n=new URLSearchParams;for(const[i,u]of Object.entries(a))u!=null&&n.append(i,typeof u=="object"?JSON.stringify(u):String(u));s&&n.append("authorization",s);const l=`${this.baseUrl}?${n.toString()}`,m=await fetch(l,{method:"GET"});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);return await m.json()}catch(s){return console.error("API POST Error:",s),{success:!1,error:s.message}}}async login(a){try{const t=`${this.baseUrl}?endpoint=login&email=${encodeURIComponent(a)}`,o=await fetch(t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(t){return console.error("Login error:",t),{success:!1,error:t.message}}}async getConfig(){return this.fetchAPI("config")}async getServices(){return this.fetchAPI("servizi")}async getOperators(){return this.fetchAPI("operatori")}async getSlots(a={}){return this.fetchAPI("slot",{params:a})}async getCustomer(a){const t=new URLSearchParams({action:"cliente",phone:a});try{return await(await fetch(`${this.baseUrl}?${t}`)).json()}catch(o){return console.error("getCustomer error:",o),{success:!1,error:o.message}}}async getMyBookings(a){var t,o;try{let s=null;try{const i=localStorage.getItem("barberbro-storage");i&&(s=(o=(t=JSON.parse(i).state)==null?void 0:t.auth)==null?void 0:o.token)}catch(i){console.warn("âš ï¸ Errore lettura token da persist:",i)}const n=a.includes("@"),l=new URLSearchParams({action:"prenotazioni"});n?l.append("email",a):l.append("phone",a),s&&l.append("authorization",s);const c=await(await fetch(`${this.baseUrl}?${l}`)).json();return c.statusCode===401&&(console.warn("ðŸ”’ Token scaduto, ricarica necessaria"),localStorage.removeItem("barberbro-storage"),window.location.reload()),c}catch(s){return console.error("getMyBookings error:",s),{success:!1,error:s.message}}}async createBooking(a){return this.postAPI({action:"prenota",...a})}async cancelBooking(a,t){return this.postAPI({action:"cancella",appointmentId:a,phone:t})}}const I=new Ee(Ie),P=r=>{if(!r||typeof r!="string")return null;const[a,t]=r.split(" ");if(!a||!t)return null;const[o,s,n]=a.split("/"),[l,m,c]=t.split(":"),i=`${n}-${s.padStart(2,"0")}-${o.padStart(2,"0")}T${l.padStart(2,"0")}:${m.padStart(2,"0")}:${(c==null?void 0:c.padStart(2,"0"))||"00"}`,u=new Date(i);return isNaN(u.getTime())?null:u},_=ie(ke((r,a)=>({config:{shop_name:"BarberBro",shop_logo_url:"",primary_color:"#007AFF",primary_color_dark:"#0051D5",secondary_color:"#34C759",accent_color:"#C19A6B",background_color:"#F5F5F7",text_color:"#1D1D1F",text_secondary_color:"#86868B",phone_contact:"+39 333 123 4567",address:"Via Principale 1",maps_url:"",booking_days:30,min_notice_hours:2,show_ratings:!0,require_phone:!0,welcome_message:"Benvenuto! Prenota il tuo appuntamento in pochi click."},auth:{isAuthenticated:!1,token:null,user:null},customer:null,isReturningCustomer:!1,services:[],operators:[],slots:[],allSlots:[],currentStep:"welcome",selectedService:null,selectedOperator:null,selectedSlot:null,selectedPath:null,preferences:{timeSlot:null,preferredDays:[],whenBooking:"asap"},loading:!1,error:null,myBookings:[],login:async(t,o)=>{r({loading:!0,error:null});try{const s=await I.login(t);return s.success?(r({auth:{isAuthenticated:!0,token:s.token,user:s.user},customer:{name:s.user.name,email:s.user.email,phone:s.user.phone||null},loading:!1}),s.user.phone&&localStorage.setItem("barberbro_customer_phone",s.user.phone),console.log("âœ… Login riuscito:",s.user.name),{success:!0}):{success:!1,error:s.error||"Login fallito"}}catch(s){return r({error:s.message,loading:!1}),{success:!1,error:s.message}}},logout:()=>{r({auth:{isAuthenticated:!1,token:null,user:null},customer:null,currentStep:"welcome"}),console.log("ðŸ‘‹ Logout eseguito")},checkAuth:async()=>{var o,s;const t=a().auth;return!(t!=null&&t.token)||!((o=t==null?void 0:t.user)!=null&&o.email)?(console.log("âŒ Auth non presente, login necessario"),r({auth:{isAuthenticated:!1,token:null,user:null}}),!1):(console.log("âœ… Auth recuperato da cache:",(s=t.user)==null?void 0:s.email),typeof t.token!="string"||t.token.trim()===""?(console.warn("âš ï¸ Token vuoto o invalido, logout"),r({auth:{isAuthenticated:!1,token:null,user:null}}),!1):!0)},loadConfig:async()=>{r({loading:!0,error:null});try{const t=await I.getConfig();if(t.success)r({config:t.config,loading:!1});else throw new Error(t.error)}catch(t){r({error:t.message,loading:!1})}},loadCustomer:async()=>{var o,s;const t=localStorage.getItem("barberbro_customer_phone");if(t)try{const n=await I.getCustomer(t);n.success&&n.found&&r({customer:n.customer,isReturningCustomer:!0,preferences:{...a().preferences,favoriteOperator:(o=n.preferences)==null?void 0:o.favoriteOperator,favoriteService:(s=n.preferences)==null?void 0:s.favoriteService}})}catch(n){console.error("Errore caricamento cliente:",n)}},loadServices:async()=>{r({loading:!0});try{const t=await I.getServices();if(t.success&&t.servizi){console.log("âœ… Servizi caricati:",t.servizi.length);const o=t.servizi.map(s=>({sv_ID:s.id,sv_name:s.name,sv_category:s.category||"Altro",sv_duration:s.duration,sv_price:s.price,sv_description:s.description||"",sv_info:s.info||""}));r({services:o,loading:!1})}else console.error("âŒ Errore caricamento servizi:",t.error),r({loading:!1,error:t.error})}catch(t){console.error("âŒ Errore loadServices:",t),r({error:t.message,loading:!1})}},loadOperators:async()=>{r({loading:!0});try{const t=await I.getOperators();if(t.success&&t.operatori){console.log("âœ… Operatori caricati:",t.operatori.length);const o=t.operatori.map(s=>({op_ID:s.id,op_name:s.name,op_workStart:s.workStart,op_workEnd:s.workEnd,op_breakStart:s.breakStart,op_breakEnd:s.breakEnd,op_image:s.image||""}));r({operators:o,loading:!1})}else console.error("âŒ Errore caricamento operatori:",t.error),r({loading:!1,error:t.error})}catch(t){console.error("âŒ Errore loadOperators:",t),r({error:t.message,loading:!1})}},loadSlots:async(t={})=>{r({loading:!0});try{const o={};t.servizioId&&(o.servizioId=t.servizioId),console.log("ðŸ” loadSlots - carico slot con filtri:",o.servizioId?`servizio ${o.servizioId}`:"TUTTI gli slot liberi");const s=await I.getSlots(o);console.log("ðŸ“¦ Risposta API slot:",s);const n=a().config,l=a().services,m=n.buffer_prima||0,c=n.buffer_dopo||0;if(s.success&&s.slots){console.log("âœ… Slot caricati dall'API:",s.slots.length);let i=0;const u=s.slots.filter(p=>P(p.at_startDateTime)?!0:(console.warn("âš ï¸ Slot con data invalida ignorato:",p),i++,!1)).map(p=>{const x=P(p.at_startDateTime),f=l.find(v=>v.sv_ID===p.sv_ID),d=((f==null?void 0:f.sv_duration)||30)+m+c,h=new Date(x.getTime()+d*6e4);return{...p,at_endDateTime:h.toISOString(),at_endDateTime_formatted:h.toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}});r({slots:u,allSlots:u,loading:!1}),i>0&&console.warn(`âš ï¸ ${i} slot con date invalide sono stati scartati`),console.log(`â±ï¸ Calcolato at_endDateTime per ${u.length} slot validi (buffer: ${m+c}min)`),console.log(`ðŸ“Š Riepilogo: API=${s.slots.length} | Invalidi=${i} | Validi=${u.length}`)}else s.success&&s.slots===void 0?(console.warn("âš ï¸ API success ma slots undefined, array vuoto?"),r({slots:[],allSlots:[],loading:!1})):(console.error("âŒ Errore caricamento slot:",s.error||"Errore sconosciuto"),console.error("ðŸ“‹ Risposta completa:",JSON.stringify(s)),r({loading:!1,error:s.error||"Errore caricamento slot"}))}catch(o){console.error("âŒ Errore loadSlots:",o),r({error:o.message,loading:!1})}},filterSlots:(t={})=>{const o=a().allSlots||[],s=a().preferences;let n=[...o];if(t.servizioId&&(n=n.filter(c=>c.sv_ID===t.servizioId)),t.operatoreId&&(n=n.filter(c=>c.or_ID===t.operatoreId)),t.data){const c=new Date(t.data).toDateString();n=n.filter(i=>{const u=P(i.at_startDateTime);return u&&u.toDateString()===c})}const l=s==null?void 0:s.timeSlot;l&&l!=="flexible"&&(n=n.filter(c=>{const i=P(c.at_startDateTime);if(!i)return!1;const u=i.getHours();return l==="morning"?u>=8&&u<12:l==="afternoon"?u>=12&&u<18:l==="evening"?u>=18&&u<21:!0})),n.sort((c,i)=>{const u=P(c.at_startDateTime),p=P(i.at_startDateTime);return!u||!p?0:u-p});const m=[];t.servizioId&&m.push(`servizio: ${t.servizioId}`),t.operatoreId&&m.push(`operatore: ${t.operatoreId}`),l&&l!=="flexible"&&m.push(`fascia: ${l}`),console.log(`ðŸ” Filtro client-side: ${o.length} â†’ ${n.length} slot ${m.length>0?`(${m.join(", ")})`:"(nessun filtro)"}`),r({slots:n})},createBooking:async t=>{r({loading:!0});try{console.log("ðŸ“ Invio prenotazione al backend:",t);const o=await I.createBooking(t);if(o.success)return localStorage.setItem("barberbro_customer_phone",t.customerPhone),r({customer:{name:t.customerName,phone:t.customerPhone,email:t.customerEmail},loading:!1}),console.log("âœ… Prenotazione confermata:",o),o;throw new Error(o.error||"Errore nella prenotazione")}catch(o){throw console.error("âŒ Errore createBooking:",o),r({error:o.message,loading:!1}),o}},loadMyBookings:async()=>{var t;r({loading:!0});try{const o=a(),s=o.customer,n=o.auth,l=(s==null?void 0:s.phone)||(s==null?void 0:s.email)||((t=n==null?void 0:n.user)==null?void 0:t.email);if(!l){console.warn("âš ï¸ Nessun identificatore cliente trovato (email o telefono)"),r({myBookings:[],loading:!1});return}console.log("ðŸ“‹ Caricamento prenotazioni per:",l),console.log("ðŸ“‹ Tipo identificatore:",l.includes("@")?"EMAIL":"PHONE");const m=await I.getMyBookings(l);if(m.success){const c=m.prenotazioni||m.bookings||[];r({myBookings:c,loading:!1}),console.log("âœ… Prenotazioni caricate:",c.length),console.log("ðŸ“‹ Dettaglio prenotazioni:",c)}else throw new Error(m.error||"Errore nel caricamento prenotazioni")}catch(o){console.error("âŒ Errore loadMyBookings:",o),r({error:o.message,myBookings:[],loading:!1})}},cancelBooking:async t=>{r({loading:!0});try{const o=a().customer,s=(o==null?void 0:o.phone)||localStorage.getItem("barberbro_customer_phone");if(!s)throw new Error("Telefono cliente non trovato");console.log("âŒ Cancellazione prenotazione:",t);const n=await I.cancelBooking(t,s);if(n.success)return r({myBookings:a().myBookings.filter(l=>l.at_ID!==t),loading:!1}),console.log("âœ… Prenotazione cancellata"),n;throw new Error(n.error||"Errore nella cancellazione")}catch(o){throw console.error("âŒ Errore cancelBooking:",o),r({error:o.message,loading:!1}),o}},setStep:t=>r({currentStep:t}),nextStep:()=>{const t=["welcome","service","operators","calendar","form","confirm"],o=t.indexOf(a().currentStep);o<t.length-1&&r({currentStep:t[o+1]})},prevStep:()=>{const t=["welcome","service","operators","calendar","form","confirm"],o=t.indexOf(a().currentStep);o>0&&r({currentStep:t[o-1]})},selectService:t=>r({selectedService:t}),selectOperator:t=>r({selectedOperator:t}),selectSlot:t=>{var s;const o=a();if(r({selectedSlot:t}),((s=o.selectedOperator)==null?void 0:s.op_ID)==="all"&&t.op_ID){const n=o.operators.find(l=>l.op_ID===t.op_ID);n&&(console.log(`ðŸ€ Mi sento fortunato â†’ Operatore assegnato: ${n.op_name}`),r({selectedOperator:n}))}},selectPath:t=>r({selectedPath:t}),setPreferences:t=>r({preferences:{...a().preferences,...t}}),resetBooking:()=>r({selectedService:null,selectedOperator:null,selectedSlot:null,selectedPath:null,currentStep:"welcome"}),clearError:()=>r({error:null})}),{name:"barberbro-storage",partialize:r=>({auth:r.auth,config:r.config,customer:r.customer,isReturningCustomer:r.isReturningCustomer,services:r.services,operators:r.operators,slots:r.slots,allSlots:r.allSlots,preferences:r.preferences})}));function X(){var c;const{config:r,customer:a,isReturningCustomer:t,setPreferences:o,setStep:s,logout:n,auth:l}=_(),m=i=>{o({timeSlot:i}),s("service")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-[#f5f5f7]",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-sm text-[#86868b] hover:text-[#1d1d1f] transition-colors",children:[e.jsx("span",{children:((c=l==null?void 0:l.user)==null?void 0:c.email)||"Account"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-6 pt-12 pb-8 text-center animate-fadeIn",children:[e.jsx("div",{className:"mb-6",children:r!=null&&r.shop_logo_url?e.jsx("img",{src:r.shop_logo_url,alt:r.shop_name,className:"w-20 h-20 mx-auto rounded-[24px] shadow-lg object-cover"}):e.jsx("div",{className:"w-20 h-20 mx-auto rounded-[24px] shadow-lg flex items-center justify-center text-4xl",style:{background:"linear-gradient(135deg, var(--color-primary), var(--color-primary-dark))"},children:"ðŸ’ˆ"})}),e.jsx("h1",{className:"text-4xl font-semibold mb-3 tracking-tight",style:{color:"var(--color-text)"},children:(r==null?void 0:r.shop_name)||"BarberBro"}),e.jsx("p",{className:"text-lg mb-8 font-normal",style:{color:"var(--color-text-secondary)"},children:(r==null?void 0:r.welcome_message)||"Prenota il tuo appuntamento in pochi tap"}),t&&a&&e.jsx("div",{className:"card mb-6 animate-scaleIn bg-gradient-to-br from-blue-50 to-white",style:{borderColor:"var(--color-primary)",borderOpacity:.2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-md",style:{background:"linear-gradient(135deg, var(--color-primary), var(--color-primary-dark))"},children:"ðŸ‘‹"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--color-text-secondary)"},children:"Bentornato"}),e.jsx("p",{className:"text-lg font-semibold",style:{color:"var(--color-text)"},children:a.name})]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-sm font-medium text-[#86868b] mb-3 uppercase tracking-wide",children:"Preferenza orario"}),e.jsxs("div",{className:"space-y-3 max-w-lg mx-auto",children:[e.jsx("button",{onClick:()=>m("flexible"),className:"card-hover w-full p-5 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-[18px] font-bold mb-1",children:"ðŸ€ Primo disponibile"}),e.jsx("p",{className:"text-[12px] opacity-90",children:"Mostrami tutti gli slot"})]}),e.jsx("div",{className:"text-2xl",children:"âœ¨"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>m("morning"),className:"card-hover p-4 flex flex-col items-center gap-2 group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",className:"w-10 h-10 text-[var(--color-primary)]",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-label":"Mattina",children:[e.jsx("path",{d:"M12 44h40"}),e.jsx("path",{d:"M20 44a12 12 0 0 1 24 0"}),e.jsx("path",{d:"M32 14v6M18 22l4 4M46 22l-4 4M12 32h6M46 32h6M22 14l2 5M40 14l-2 5"})]}),e.jsx("span",{className:"text-[14px] font-medium text-[#1d1d1f]",children:"Mattino"}),e.jsx("span",{className:"text-[11px] text-[#86868b]",children:"8:00 - 12:00"})]}),e.jsxs("button",{onClick:()=>m("afternoon"),className:"card-hover p-4 flex flex-col items-center gap-2 group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",className:"w-10 h-10 text-[var(--color-accent)]",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-label":"Pomeriggio",children:[e.jsx("circle",{cx:"42",cy:"22",r:"10"}),e.jsx("path",{d:"M42 8v4M42 32v4M56 22h-4M32 22h-4M51 13l-3 3M33 31l3-3M51 31l-3-3M33 13l3 3"}),e.jsx("path",{d:"M12 48h40"})]}),e.jsx("span",{className:"text-[14px] font-medium text-[#1d1d1f]",children:"Pomeriggio"}),e.jsx("span",{className:"text-[11px] text-[#86868b]",children:"12:00 - 18:00"})]}),e.jsxs("button",{onClick:()=>m("evening"),className:"card-hover p-4 flex flex-col items-center gap-2 group col-span-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",className:"w-10 h-10 text-[var(--color-secondary)]",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-label":"Sera",children:[e.jsx("path",{d:"M40 14a14 14 0 1 0 10 24a12 12 0 1 1-10-24z"}),e.jsx("path",{d:"M20 20l0 4M18 22l4 0"}),e.jsx("path",{d:"M26 12l0 3M24.5 13.5l3 0"}),e.jsx("path",{d:"M18 48h28"})]}),e.jsx("span",{className:"text-[14px] font-medium text-[#1d1d1f]",children:"Sera"}),e.jsx("span",{className:"text-[11px] text-[#86868b]",children:"Dalle 18:00 in poi"})]})]})]})]}),e.jsx("button",{onClick:()=>s("my-bookings"),className:"btn-text mt-6",children:"ðŸ“… Le mie prenotazioni"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto px-6 pb-12",children:[e.jsx("div",{className:"card bg-[#f5f5f7] border-0",children:e.jsxs("div",{className:"space-y-3 text-center",children:[(r==null?void 0:r.address)&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[#86868b]",children:[e.jsx("span",{children:"ðŸ“"}),e.jsx("span",{className:"text-[15px]",children:r.address})]}),(r==null?void 0:r.phone_contact)&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[#86868b]",children:[e.jsx("span",{children:"ðŸ“ž"}),e.jsx("span",{className:"text-[15px]",children:r.phone_contact})]})]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-xs text-[#86868b]",children:["Powered by ",e.jsx("span",{className:"font-semibold",children:"BarberBro"})," v2.1"]})})]})]})}function De(){const{services:r,selectService:a,filterSlots:t,setStep:o,prevStep:s}=_(),n=c=>{a(c),t({servizioId:c.sv_ID}),o("operators")},l=r.reduce((c,i)=>{const u=i.sv_category||"Altro";return c[u]||(c[u]=[]),c[u].push(i),c},{}),m=Object.keys(l).sort((c,i)=>{const u={Capelli:1,Barba:2},p=u[c]||999,x=u[i]||999;return p!==x?p-x:c.localeCompare(i)});return e.jsxs("div",{className:"min-h-screen bg-[#f5f5f7]",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-apple border-b border-[#d2d2d7] sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(),className:"text-[#007AFF] text-[17px] font-medium hover:opacity-60 transition-opacity",children:"â† Indietro"}),e.jsx("h2",{className:"text-[17px] font-semibold text-[#1d1d1f] flex-1 text-center",children:"Scegli il servizio"}),e.jsx("div",{className:"w-20"})," "]})}),e.jsx("div",{className:"max-w-2xl mx-auto px-6 py-6 space-y-8 animate-fadeIn",children:m.map(c=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[22px] font-bold text-[#1d1d1f] px-2",children:c}),e.jsx("div",{className:"space-y-3",children:l[c].map((i,u)=>e.jsx("button",{onClick:()=>n(i),className:"card-hover w-full text-left p-5",style:{animationDelay:`${u*50}ms`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-[17px] text-[#1d1d1f] mb-2",children:i.sv_name}),e.jsxs("div",{className:"flex items-center gap-4 text-[15px] text-[#86868b] mb-2",children:[e.jsxs("span",{children:["â± ",i.sv_duration," min"]}),i.sv_price&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"font-medium text-[#007AFF]",children:["â‚¬",i.sv_price]})]})]}),i.sv_info&&e.jsx("p",{className:"text-[13px] text-[#86868b] mt-2 leading-relaxed",children:i.sv_info})]}),e.jsx("div",{className:"text-[#007AFF] text-xl ml-4",children:"â†’"})]})},i.sv_ID))})]},c))})]})}function Pe(){const{operators:r,selectOperator:a,filterSlots:t,setStep:o,prevStep:s}=_(),n=l=>{a(l),l.op_ID==="all"?t({}):t({operatoreId:l.op_ID}),o("calendar")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-md mx-auto px-6 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(),className:"text-2xl",children:"â†"}),e.jsx("h2",{className:"text-xl font-bold flex-1",children:"Scegli il barbiere"})]})}),e.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:[e.jsx("button",{onClick:()=>n({op_ID:"all",op_name:"Qualsiasi operatore"}),className:"card-hover w-full text-left p-6 bg-gradient-to-r from-primary to-accent text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl mb-1",children:"ðŸ€ Mi Sento Fortunato"}),e.jsx("p",{className:"text-sm opacity-90",children:"Mostra tutti gli slot disponibili"})]}),e.jsx("div",{className:"text-3xl",children:"âœ¨"})]})}),r.map(l=>e.jsx("button",{onClick:()=>n(l),className:"card-hover w-full text-left p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:["ðŸ‘¤ ",l.op_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Orario: ",l.op_workStart," - ",l.op_workEnd]})]}),e.jsx("div",{className:"text-2xl text-primary",children:"â†’"})]})},l.op_ID))]})]})}const ze={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"piÃ¹ di un anno",other:"piÃ¹ di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},Ce=(r,a,t)=>{let o;const s=ze[r];return typeof s=="string"?o=s:a===1?o=s.one:o=s.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"tra "+o:o+" fa":o},Me={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},$e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ae={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Te={date:U({formats:Me,defaultWidth:"full"}),time:U({formats:$e,defaultWidth:"full"}),dateTime:U({formats:Ae,defaultWidth:"full"})},q=["domenica","lunedÃ¬","martedÃ¬","mercoledÃ¬","giovedÃ¬","venerdÃ¬","sabato"];function Be(r){switch(r){case 0:return"'domenica scorsa alle' p";default:return"'"+q[r]+" scorso alle' p"}}function Y(r){return"'"+q[r]+" alle' p"}function Oe(r){switch(r){case 0:return"'domenica prossima alle' p";default:return"'"+q[r]+" prossimo alle' p"}}const Le={lastWeek:(r,a,t)=>{const o=r.getDay();return J(r,a,t)?Y(o):Be(o)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(r,a,t)=>{const o=r.getDay();return J(r,a,t)?Y(o):Oe(o)},other:"P"},Re=(r,a,t,o)=>{const s=Le[r];return typeof s=="function"?s(a,t,o):s},Fe={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},We={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1Âº trimestre","2Âº trimestre","3Âº trimestre","4Âº trimestre"]},He={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},Ue={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","lunedÃ¬","martedÃ¬","mercoledÃ¬","giovedÃ¬","venerdÃ¬","sabato"]},Ge={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},qe={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},Je=(r,a)=>{const t=Number(r);return String(t)},Ve={ordinalNumber:Je,era:M({values:Fe,defaultWidth:"wide"}),quarter:M({values:We,defaultWidth:"wide",argumentCallback:r=>r-1}),month:M({values:He,defaultWidth:"wide"}),day:M({values:Ue,defaultWidth:"wide"}),dayPeriod:M({values:Ge,defaultWidth:"wide",formattingValues:qe,defaultFormattingWidth:"wide"})},Xe=/^(\d+)(Âº)?/i,Ye=/\d+/i,Qe={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},Ke={any:[/^a/i,/^(d|e)/i]},Ze={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234](Âº)? trimestre/i},et={any:[/1/i,/2/i,/3/i,/4/i]},tt={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},rt={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},ot={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|Ã¬]|marted[i|Ã¬]|mercoled[i|Ã¬]|gioved[i|Ã¬]|venerd[i|Ã¬]|sabato)/i},at={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},st={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},nt={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},it={ordinalNumber:le({matchPattern:Xe,parsePattern:Ye,valueCallback:r=>parseInt(r,10)}),era:$({matchPatterns:Qe,defaultMatchWidth:"wide",parsePatterns:Ke,defaultParseWidth:"any"}),quarter:$({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any",valueCallback:r=>r+1}),month:$({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),day:$({matchPatterns:ot,defaultMatchWidth:"wide",parsePatterns:at,defaultParseWidth:"any"}),dayPeriod:$({matchPatterns:st,defaultMatchWidth:"any",parsePatterns:nt,defaultParseWidth:"any"})},ae={code:"it",formatDistance:Ce,formatLong:Te,formatRelative:Re,localize:Ve,match:it,options:{weekStartsOn:1,firstWeekContainsDate:4}};function lt(){const{slots:r,operators:a,selectSlot:t,setStep:o,prevStep:s}=_(),n=p=>{t(p),o("form")},l=p=>{try{const[x,f]=p.split(" ");return(f==null?void 0:f.substring(0,5))||p}catch{return p}},m=p=>{try{const[x,f]=p.split(" "),[y,d,h]=x.split("/"),v=`${h}-${d}-${y}T${f}`,g=G(v);return Z(g,"EEEE d MMMM",{locale:ae})}catch{return p.split(" ")[0]}},c=p=>{const x=a.find(f=>f.op_ID===p);return(x==null?void 0:x.op_name)||""},i=r.reduce((p,x)=>{const f=x.at_startDateTime.split(" ")[0];return p[f]||(p[f]=[]),p[f].push(x),p},{}),u=Object.keys(i).length;return console.log(`ðŸ“… Slot raggruppati per ${u} giorni:`,Object.keys(i)),e.jsxs("div",{className:"min-h-screen bg-[#f5f5f7]",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-apple border-b border-[#d2d2d7] sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(),className:"text-[#007AFF] text-[17px] font-medium hover:opacity-60 transition-opacity",children:"â† Indietro"}),e.jsx("h2",{className:"text-[17px] font-semibold text-[#1d1d1f] flex-1 text-center",children:"Scegli data e ora"}),e.jsx("div",{className:"w-20"})," "]})}),e.jsx("div",{className:"max-w-2xl mx-auto px-6 py-6 space-y-6 animate-fadeIn",children:Object.entries(i).map(([p,x])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"sticky top-[73px] bg-[#f5f5f7] py-2 z-[5]",children:e.jsx("h3",{className:"text-[13px] font-semibold text-[#86868b] uppercase tracking-wide",children:m(x[0].at_startDateTime)})}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(f=>e.jsxs("button",{onClick:()=>n(f),className:"card-hover p-4 text-center min-h-[60px] flex flex-col items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-[17px] text-[#007AFF]",children:l(f.at_startDateTime)}),f.op_ID&&c(f.op_ID)&&e.jsx("div",{className:"text-[11px] text-[#86868b] mt-1 truncate w-full",children:c(f.op_ID)})]},f.at_ID))})]},p))})]})}function ct(){const{customer:r,selectedSlot:a,selectedService:t,selectedOperator:o,createBooking:s,setStep:n,prevStep:l}=_(),[m,c]=b.useState({customerName:(r==null?void 0:r.name)||"",customerPhone:(r==null?void 0:r.phone)||"",customerEmail:(r==null?void 0:r.email)||""}),[i,u]=b.useState(!1),p=async x=>{x.preventDefault(),u(!0);try{await s({slotId:a.at_ID,servizioId:t.sv_ID,operatoreId:(o==null?void 0:o.op_ID)||a.op_ID,...m}),n("confirm")}catch(f){alert("Errore durante la prenotazione: "+f.message)}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-md mx-auto px-6 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>l(),className:"text-2xl",children:"â†"}),e.jsx("h2",{className:"text-xl font-bold flex-1",children:"I tuoi dati"})]})}),e.jsx("div",{className:"max-w-md mx-auto px-6 py-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 bg-primary/5",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Riepilogo prenotazione"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["âœ‚ï¸ ",t==null?void 0:t.sv_name]}),e.jsxs("div",{children:["ðŸ‘¤ ",(o==null?void 0:o.op_name)||"Non specificato"]}),e.jsxs("div",{children:["â±ï¸ ",t==null?void 0:t.sv_duration," min"]}),(t==null?void 0:t.sv_price)&&e.jsxs("div",{children:["ðŸ’° â‚¬",t==null?void 0:t.sv_price]}),e.jsxs("div",{children:["ðŸ“… ",a==null?void 0:a.at_startDateTime]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nome completo *"}),e.jsx("input",{type:"text",required:!0,value:m.customerName,onChange:x=>c({...m,customerName:x.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none",placeholder:"Mario Rossi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telefono *"}),e.jsx("input",{type:"tel",required:!0,value:m.customerPhone,onChange:x=>c({...m,customerPhone:x.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none",placeholder:"3331234567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email (opzionale)"}),e.jsx("input",{type:"email",value:m.customerEmail,onChange:x=>c({...m,customerEmail:x.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none",placeholder:"mario@email.com"})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"btn-primary w-full text-lg py-4 disabled:opacity-50",children:i?"Prenotazione...":"âœ… Conferma Prenotazione"})]})})]})}function dt(){const{config:r,selectedSlot:a,selectedService:t,selectedOperator:o,customer:s,resetBooking:n,setStep:l}=_(),m=()=>{n(),l("welcome")},c=()=>{n(),l("my-bookings")},i=()=>{if(!a||!t)return;const p=new Date(a.at_startDateTime),x=new Date(p.getTime()+t.sv_duration*6e4),f=d=>d.toISOString().replace(/-|:|\.\d+/g,""),y=new URLSearchParams({action:"TEMPLATE",text:`${t.sv_name} - ${(r==null?void 0:r.shop_name)||"BarberBro"}`,dates:`${f(p)}/${f(x)}`,details:`Servizio: ${t.sv_name}
Operatore: ${(o==null?void 0:o.op_name)||"Non specificato"}
Durata: ${t.sv_duration} min
Prezzo: â‚¬${t.sv_price}`,location:(r==null?void 0:r.shop_address)||(r==null?void 0:r.shop_name)||"BarberBro"});window.open(`https://calendar.google.com/calendar/render?${y.toString()}`,"_blank")},u=()=>{if(!a||!t)return;const p=new Date(a.at_startDateTime),x=new Date(p.getTime()+t.sv_duration*6e4),f=v=>v.toISOString().replace(/-|:|\.\d+/g,""),y=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//BarberBro//Booking//IT
BEGIN:VEVENT
UID:${a.at_ID}@barberbro.app
DTSTAMP:${f(new Date)}
DTSTART:${f(p)}
DTEND:${f(x)}
SUMMARY:${t.sv_name} - ${(r==null?void 0:r.shop_name)||"BarberBro"}
DESCRIPTION:Servizio: ${t.sv_name}\\nOperatore: ${(o==null?void 0:o.op_name)||"Non specificato"}\\nDurata: ${t.sv_duration} min\\nPrezzo: â‚¬${t.sv_price}
LOCATION:${(r==null?void 0:r.shop_address)||(r==null?void 0:r.shop_name)||"BarberBro"}
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR`,d=new Blob([y],{type:"text/calendar;charset=utf-8"}),h=document.createElement("a");h.href=URL.createObjectURL(d),h.download=`prenotazione-${a.at_ID}.ics`,document.body.appendChild(h),h.click(),document.body.removeChild(h)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-8xl mb-6 animate-bounce",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Prenotazione Confermata!"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["Ti aspettiamo da ",(r==null?void 0:r.shop_name)||"BarberBro"]})]}),e.jsxs("div",{className:"card p-8 mb-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4 text-center",children:"Dettagli Prenotazione"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Servizio:"}),e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.sv_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Operatore:"}),e.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.op_name)||"Non specificato"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data e ora:"}),e.jsx("span",{className:"font-semibold",children:a==null?void 0:a.at_startDateTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Durata:"}),e.jsxs("span",{className:"font-semibold",children:[t==null?void 0:t.sv_duration," min"]})]}),(t==null?void 0:t.sv_price)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Prezzo:"}),e.jsxs("span",{className:"font-semibold text-primary",children:["â‚¬",t==null?void 0:t.sv_price]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:i,className:"btn-secondary w-full flex items-center justify-center gap-2",children:"ðŸ“… Aggiungi a Google Calendar"}),e.jsx("button",{onClick:u,className:"btn-secondary w-full flex items-center justify-center gap-2",children:"ðŸ“² Scarica per Apple/Outlook"}),e.jsx("button",{onClick:c,className:"btn-primary w-full",children:"ï¿½ Vedi le mie prenotazioni"}),e.jsx("button",{onClick:m,className:"btn-text w-full",children:"ðŸ  Torna alla home"})]})]})})}function mt(){var y;const{config:r,customer:a,auth:t,myBookings:o,loading:s,error:n,loadMyBookings:l,cancelBooking:m,setStep:c}=_();b.useEffect(()=>{var h,v;console.log("ðŸ” MyBookings - Stato attuale:",{customer:a,authUser:t==null?void 0:t.user,hasPhone:!!(a!=null&&a.phone),hasEmail:!!(a!=null&&a.email),hasAuthEmail:!!((h=t==null?void 0:t.user)!=null&&h.email)});const d=(a==null?void 0:a.phone)||(a==null?void 0:a.email)||((v=t==null?void 0:t.user)==null?void 0:v.email);d?(console.log("ðŸ“‹ Caricamento prenotazioni con identificatore:",d),console.log("ðŸ“‹ Tipo identificatore:",d.includes("@")?"EMAIL":"PHONE"),console.log("ðŸ“‹ Customer completo:",a),console.log("ðŸ“‹ Auth user completo:",t==null?void 0:t.user),l()):(console.warn("âš ï¸ Nessun identificatore trovato per caricare prenotazioni"),console.warn("âš ï¸ Customer:",a),console.warn("âš ï¸ Auth user:",t==null?void 0:t.user))},[a,l,(y=t==null?void 0:t.user)==null?void 0:y.email]);const i=async d=>{window.confirm("Sei sicuro di voler cancellare questa prenotazione?")&&await m(d)},u=d=>{try{const[h,v]=d.split(" "),[g,j,w]=h.split("/"),N=`${w}-${j}-${g}T${v}`,S=G(N);return Z(S,"EEEE d MMMM 'alle' HH:mm",{locale:ae})}catch{return d}},p=d=>{try{const[h,v]=d.split(" "),[g,j,w]=h.split("/"),N=`${w}-${j}-${g}T${v}`;return G(N)>new Date}catch{return!0}};if(s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin text-6xl mb-4",children:"â³"}),e.jsx("p",{className:"text-gray-600",children:"Carico le tue prenotazioni..."})]})});const x=o.filter(d=>p(d.at_startDateTime||d.dateTime)),f=o.filter(d=>!p(d.at_startDateTime||d.dateTime));return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-md mx-auto px-6 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("welcome"),className:"text-2xl hover:scale-110 transition-transform",children:"â†"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Le mie prenotazioni"}),e.jsx("p",{className:"text-sm text-gray-600",children:(a==null?void 0:a.name)||"Cliente"})]})]})}),e.jsxs("div",{className:"max-w-md mx-auto p-6",children:[n&&e.jsx("div",{className:"card p-4 mb-6 bg-red-50 border-red-200",children:e.jsxs("p",{className:"text-red-700",children:["âŒ ",n]})}),o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“…"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nessuna prenotazione"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Non hai ancora prenotato nessun appuntamento"}),e.jsx("button",{onClick:()=>c("service"),className:"btn-primary",children:"Prenota ora"})]}):e.jsxs("div",{className:"space-y-6",children:[x.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"ðŸ”œ Prossimi appuntamenti"}),e.jsx("div",{className:"space-y-3",children:x.map(d=>e.jsxs("div",{className:"card card-hover p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:d.serviceName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["con ",d.operatorName]})]}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["â‚¬",d.at_price||"N/A"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-3",children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{children:u(d.at_startDateTime||d.dateTime)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx("span",{children:"â±ï¸"}),e.jsxs("span",{children:[d.at_duration||"N/A"," minuti"]})]}),e.jsx("button",{onClick:()=>i(d.at_ID),className:"w-full py-2 px-4 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors font-medium text-sm",children:"âŒ Cancella prenotazione"})]},d.at_ID))})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"âœ… Appuntamenti passati"}),e.jsx("div",{className:"space-y-3",children:f.map(d=>e.jsxs("div",{className:"card p-4 opacity-75",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:d.serviceName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["con ",d.operatorName]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-600",children:["â‚¬",d.at_price||"N/A"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{children:u(d.at_startDateTime||d.dateTime)})]})]},d.at_ID))})]})]}),e.jsx("button",{onClick:()=>c("welcome"),className:"btn-secondary w-full mt-6",children:"ðŸ  Torna alla home"})]})]})}function B({message:r="Caricamento..."}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 to-accent/5",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-xl text-gray-700 font-medium",children:r})]})})}function Q({error:r}){const{clearError:a,setStep:t}=_(),o=()=>{a(),t("welcome"),window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"card text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ops! Qualcosa Ã¨ andato storto"}),e.jsx("p",{className:"text-gray-600 mb-6",children:r||"Errore sconosciuto. Riprova piÃ¹ tardi."}),e.jsx("button",{onClick:o,className:"btn-primary w-full",children:"Riprova"})]})})})}class A extends Error{}A.prototype.name="InvalidTokenError";function ut(r){return decodeURIComponent(atob(r).replace(/(.)/g,(a,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function pt(r){let a=r.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return ut(a)}catch{return atob(a)}}function ht(r,a){if(typeof r!="string")throw new A("Invalid token specified: must be a string");a||(a={});const t=a.header===!0?0:1,o=r.split(".")[t];if(typeof o!="string")throw new A(`Invalid token specified: missing part #${t+1}`);let s;try{s=pt(o)}catch(n){throw new A(`Invalid token specified: invalid base64 for part #${t+1} (${n.message})`)}try{return JSON.parse(s)}catch(n){throw new A(`Invalid token specified: invalid json for part #${t+1} (${n.message})`)}}function xt(){const{config:r,login:a}=_(),[t,o]=b.useState(""),[s,n]=b.useState(!1),l=async c=>{n(!0),o("");try{const i=ht(c.credential),u=i.email,p=i.name;console.log("âœ… Google OAuth success:",{email:u,name:p});const x=await a(u,p);x.success||o(x.error||"Errore durante il login")}catch(i){console.error("âŒ Login error:",i),o(i.message||"Errore imprevisto durante il login")}finally{n(!1)}},m=()=>{o("Accesso Google annullato o fallito")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f5f5f7] to-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[r!=null&&r.shop_logo_url?e.jsx("img",{src:r.shop_logo_url,alt:r.shop_name,className:"w-24 h-24 mx-auto rounded-[24px] shadow-lg mb-4"}):e.jsx("div",{className:"w-24 h-24 mx-auto rounded-[24px] flex items-center justify-center mb-4 shadow-lg",style:{background:"linear-gradient(135deg, var(--color-primary), var(--color-primary-dark))"},children:e.jsx("span",{className:"text-white text-4xl",children:"ðŸ’ˆ"})}),e.jsx("h1",{className:"text-3xl font-bold text-[#1d1d1f] mb-2",children:(r==null?void 0:r.shop_name)||"BarberBro"}),(r==null?void 0:r.shop_tagline)&&e.jsx("p",{className:"text-[#86868b] text-sm",children:r.shop_tagline})]}),e.jsxs("div",{className:"bg-white rounded-[20px] shadow-xl p-8 mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-[#1d1d1f] text-center mb-2",children:"Accedi per prenotare"}),e.jsx("p",{className:"text-[#86868b] text-center mb-8 text-sm",children:(r==null?void 0:r.login_required_message)||"Usa il tuo account Google per accedere in modo sicuro"}),e.jsx("div",{className:"flex justify-center mb-6",children:s?e.jsx("div",{className:"w-full h-12 bg-[#f5f5f7] rounded-[12px] flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-3 border-[#007AFF] border-t-transparent rounded-full animate-spin"})}):e.jsx(ye,{onSuccess:l,onError:m,useOneTap:!1,text:"signin_with",shape:"rectangular",theme:"outline",size:"large",width:"300"})}),t&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-[12px] p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2 flex-shrink-0",children:"âš ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 text-sm font-medium mb-1",children:"Errore di accesso"}),e.jsx("p",{className:"text-red-600 text-xs",children:t}),t.includes("non registrata")||t.includes("non abilitato")?e.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[e.jsx("p",{className:"text-red-700 text-xs font-medium mb-2",children:"Cosa fare:"}),e.jsxs("ul",{className:"text-red-600 text-xs space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Contatta il negozio per registrarti"}),e.jsx("li",{children:"Verifica di usare l'email corretta"}),(r==null?void 0:r.phone_contact)&&e.jsxs("li",{children:["Chiama: ",e.jsx("a",{href:`tel:${r.phone_contact}`,className:"underline font-medium",children:r.phone_contact})]})]})]}):null]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-[#86868b] text-xs",children:["ðŸ”’ Accesso sicuro tramite Google OAuth",e.jsx("br",{}),"Non memorizziamo password"]})})]}),((r==null?void 0:r.phone_contact)||(r==null?void 0:r.email_contact))&&e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-[#86868b] text-xs",children:"Non hai un account?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[r.phone_contact&&e.jsx("a",{href:`tel:${r.phone_contact}`,className:"text-[#007AFF] text-sm font-medium hover:underline",children:"ðŸ“ž Chiamaci"}),r.email_contact&&e.jsx("a",{href:`mailto:${r.email_contact}`,className:"text-[#007AFF] text-sm font-medium hover:underline",children:"âœ‰ï¸ Email"})]})]})]})})}function ft(){const{currentStep:r,config:a,auth:t,loading:o,error:s,loadConfig:n,checkAuth:l,loadServices:m,loadOperators:c,loadSlots:i,services:u,operators:p}=_(),[x,f]=b.useState(!1),[y,d]=b.useState(!1),[h,v]=b.useState(!1);if(b.useEffect(()=>{n(),l();const w=setTimeout(()=>{f(!0)},1e4);return()=>clearTimeout(w)},[]),b.useEffect(()=>{(async()=>{if(t.isAuthenticated&&!h&&!y){console.log("ðŸš€ Caricamento dati iniziali dopo login..."),d(!0);try{await Promise.all([m(),c(),i({})]),console.log("âœ… Dati iniziali caricati con successo!"),v(!0)}catch(N){console.error("âŒ Errore caricamento dati iniziali:",N)}finally{d(!1)}}})()},[t.isAuthenticated,h]),b.useEffect(()=>{a&&!a.google_client_id&&(console.warn("âš ï¸ google_client_id mancante, ricarico config..."),n())},[a]),b.useEffect(()=>{if(a){const w=z=>{const E=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z);return E?`${parseInt(E[1],16)}, ${parseInt(E[2],16)}, ${parseInt(E[3],16)}`:"0, 122, 255"};document.documentElement.style.setProperty("--color-primary",a.primary_color||"#007AFF"),document.documentElement.style.setProperty("--color-primary-rgb",w(a.primary_color||"#007AFF")),document.documentElement.style.setProperty("--color-primary-dark",a.primary_color_dark||"#0051D5"),document.documentElement.style.setProperty("--color-secondary",a.secondary_color||"#34C759"),document.documentElement.style.setProperty("--color-accent",a.accent_color||"#C19A6B"),document.documentElement.style.setProperty("--color-background",a.background_color||"#F5F5F7"),document.documentElement.style.setProperty("--color-text",a.text_color||"#1D1D1F"),document.documentElement.style.setProperty("--color-text-secondary",a.text_secondary_color||"#86868B");const N=a.pwa_theme_color||a.primary_color||"#007AFF",S=document.querySelector('meta[name="theme-color"]');S&&S.setAttribute("content",N),document.title=`${a.shop_name||"BarberBro"} - Booking`}},[a]),o&&!a)return e.jsx(B,{});if(s)return e.jsx(Q,{error:s});if(!a||!a.shop_name)return e.jsx(B,{});const g=a.google_client_id;if(!g)return x?e.jsx(Q,{error:"Configurazione OAuth mancante. Contatta l'amministratore per configurare google_client_id nel foglio ConfigPWA."}):e.jsx(B,{message:"Caricamento configurazione..."});function j(){switch(r){case"welcome":return e.jsx(X,{});case"service":return e.jsx(De,{});case"operators":return e.jsx(Pe,{});case"calendar":return e.jsx(lt,{});case"form":return e.jsx(ct,{});case"confirm":return e.jsx(dt,{});case"my-bookings":return e.jsx(mt,{});default:return e.jsx(X,{})}}return e.jsx(fe,{clientId:g,children:e.jsx("div",{className:"min-h-screen bg-[#f5f5f7]",children:t.isAuthenticated?y?e.jsx(B,{message:"Caricamento dati..."}):j():e.jsx(xt,{})})})}re(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(ft,{})}));
